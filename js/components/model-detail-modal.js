/**
 * Model Detail Modal Component
 * Professional model profile viewer with commercial features
 */

class ModelDetailModal {
    constructor() {
        this.modal = null;
        this.currentModel = null;
        this.selectedPackage = null;
        this.init();
    }
    
    init() {
        // Create modal structure
        this.createModalStructure();
        this.attachEventListeners();
    }
    
    createModalStructure() {
        const modalHTML = `
            <div id="modelDetailModal" class="model-detail-modal">
                <div class="modal-overlay"></div>
                <div class="modal-container">
                    <button class="modal-close" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M6 6l12 12M6 18L18 6" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    
                    <div class="modal-content">
                        <!-- Hero Section -->
                        <div class="model-hero">
                            <div class="hero-background"></div>
                            <div class="hero-content">
                                <div class="model-avatar-large">
                                    <img class="model-avatar-img" src="" alt="">
                                    <div class="online-indicator"></div>
                                </div>
                                <div class="model-hero-info">
                                    <div class="model-badges">
                                        <span class="badge badge-verified" style="display:none">‚úì Verified</span>
                                        <span class="badge badge-pro" style="display:none">PRO</span>
                                        <span class="badge badge-new" style="display:none">NEW</span>
                                    </div>
                                    <h1 class="model-name"></h1>
                                    <p class="model-tagline"></p>
                                    <div class="model-stats-row">
                                        <div class="stat-item">
                                            <span class="stat-value model-rating">0.0</span>
                                            <span class="stat-label">ÌèâÏ†ê</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-value model-projects">0</span>
                                            <span class="stat-label">ÏôÑÎ£å ÌîÑÎ°úÏ†ùÌä∏</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-value model-response">2ÏãúÍ∞Ñ</span>
                                            <span class="stat-label">ÏùëÎãµ ÏãúÍ∞Ñ</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="hero-actions">
                                    <button class="btn btn-primary btn-contact">
                                        <span class="btn-icon">üí¨</span>
                                        Î¨∏ÏùòÌïòÍ∏∞
                                    </button>
                                    <button class="btn btn-secondary btn-save">
                                        <span class="btn-icon">‚ô°</span>
                                        Ï†ÄÏû•
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Navigation Tabs -->
                        <div class="modal-nav">
                            <button class="nav-tab active" data-tab="overview">Í∞úÏöî</button>
                            <button class="nav-tab" data-tab="portfolio">Ìè¨Ìä∏Ìè¥Î¶¨Ïò§</button>
                            <button class="nav-tab" data-tab="packages">Ìå®ÌÇ§ÏßÄ/Í∞ÄÍ≤©</button>
                            <button class="nav-tab" data-tab="reviews">Î¶¨Î∑∞</button>
                            <button class="nav-tab" data-tab="about">ÏÜåÍ∞ú</button>
                        </div>
                        
                        <!-- Tab Contents -->
                        <div class="modal-body">
                            <!-- Overview Tab -->
                            <div class="tab-content active" data-content="overview">
                                <div class="overview-grid">
                                    <!-- About Section -->
                                    <div class="overview-section">
                                        <h3>ÏÜåÍ∞ú</h3>
                                        <p class="model-bio"></p>
                                        <div class="model-specialties">
                                            <h4>Ï†ÑÎ¨∏ Î∂ÑÏïº</h4>
                                            <div class="specialty-tags"></div>
                                        </div>
                                        <div class="model-languages">
                                            <h4>ÏÇ¨Ïö© Ïñ∏Ïñ¥</h4>
                                            <div class="language-tags"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Quick Stats -->
                                    <div class="overview-section">
                                        <h3>Îπ†Î•∏ Ï†ïÎ≥¥</h3>
                                        <div class="quick-stats">
                                            <div class="quick-stat">
                                                <span class="icon">üìç</span>
                                                <span class="label">ÏúÑÏπò</span>
                                                <span class="value model-location">ÏÑúÏö∏, ÎåÄÌïúÎØºÍµ≠</span>
                                            </div>
                                            <div class="quick-stat">
                                                <span class="icon">üíº</span>
                                                <span class="label">Í≤ΩÎ†•</span>
                                                <span class="value model-experience">5ÎÖÑ+</span>
                                            </div>
                                            <div class="quick-stat">
                                                <span class="icon">‚è±Ô∏è</span>
                                                <span class="label">Í∞ÄÏûÖÏùº</span>
                                                <span class="value model-joined">2024ÎÖÑ 1Ïõî</span>
                                            </div>
                                            <div class="quick-stat">
                                                <span class="icon">üîÑ</span>
                                                <span class="label">Ïû¨Íµ¨Îß§Ïú®</span>
                                                <span class="value model-repeat">85%</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Recent Portfolio Preview -->
                                    <div class="overview-section full-width">
                                        <h3>ÏµúÍ∑º ÏûëÏóÖ</h3>
                                        <div class="portfolio-preview"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Portfolio Tab -->
                            <div class="tab-content" data-content="portfolio">
                                <div class="portfolio-filters">
                                    <button class="filter-btn active" data-filter="all">Ï†ÑÏ≤¥</button>
                                    <button class="filter-btn" data-filter="fashion">Ìå®ÏÖò</button>
                                    <button class="filter-btn" data-filter="beauty">Î∑∞Ìã∞</button>
                                    <button class="filter-btn" data-filter="lifestyle">ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº</button>
                                    <button class="filter-btn" data-filter="commercial">Í¥ëÍ≥†</button>
                                </div>
                                <div class="portfolio-grid"></div>
                            </div>
                            
                            <!-- Packages Tab -->
                            <div class="tab-content" data-content="packages">
                                <div class="packages-container">
                                    <div class="packages-grid"></div>
                                    <div class="custom-quote-section">
                                        <h3>ÎßûÏ∂§ Í≤¨Ï†ÅÏù¥ ÌïÑÏöîÌïòÏã†Í∞ÄÏöî?</h3>
                                        <p>ÌîÑÎ°úÏ†ùÌä∏Ïóê ÎßûÎäî ÎßûÏ∂§Ìòï Ìå®ÌÇ§ÏßÄÎ•º Ï†úÏïàÌï¥ÎìúÎ¶ΩÎãàÎã§.</p>
                                        <button class="btn btn-primary">ÎßûÏ∂§ Í≤¨Ï†Å ÏöîÏ≤≠</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Reviews Tab -->
                            <div class="tab-content" data-content="reviews">
                                <div class="reviews-summary">
                                    <div class="rating-overview">
                                        <div class="rating-score">
                                            <span class="score">4.8</span>
                                            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                            <span class="count">127Í∞ú Î¶¨Î∑∞</span>
                                        </div>
                                        <div class="rating-breakdown">
                                            <div class="rating-bar">
                                                <span>5Ï†ê</span>
                                                <div class="bar"><div class="fill" style="width: 80%"></div></div>
                                                <span>80%</span>
                                            </div>
                                            <div class="rating-bar">
                                                <span>4Ï†ê</span>
                                                <div class="bar"><div class="fill" style="width: 15%"></div></div>
                                                <span>15%</span>
                                            </div>
                                            <div class="rating-bar">
                                                <span>3Ï†ê</span>
                                                <div class="bar"><div class="fill" style="width: 3%"></div></div>
                                                <span>3%</span>
                                            </div>
                                            <div class="rating-bar">
                                                <span>2Ï†ê</span>
                                                <div class="bar"><div class="fill" style="width: 1%"></div></div>
                                                <span>1%</span>
                                            </div>
                                            <div class="rating-bar">
                                                <span>1Ï†ê</span>
                                                <div class="bar"><div class="fill" style="width: 1%"></div></div>
                                                <span>1%</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rating-categories">
                                        <div class="category-rating">
                                            <span>Ïª§ÎÆ§ÎãàÏºÄÏù¥ÏÖò</span>
                                            <div class="mini-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                            <span>4.9</span>
                                        </div>
                                        <div class="category-rating">
                                            <span>ÌíàÏßà</span>
                                            <div class="mini-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                            <span>4.8</span>
                                        </div>
                                        <div class="category-rating">
                                            <span>ÎÇ©Í∏∞</span>
                                            <div class="mini-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                            <span>4.7</span>
                                        </div>
                                        <div class="category-rating">
                                            <span>Í∞ÄÏÑ±ÎπÑ</span>
                                            <div class="mini-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                            <span>4.8</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="reviews-filter">
                                    <select>
                                        <option>ÏµúÏã†Ïàú</option>
                                        <option>ÎÜíÏùÄ ÌèâÏ†êÏàú</option>
                                        <option>ÎÇÆÏùÄ ÌèâÏ†êÏàú</option>
                                        <option>ÎèÑÏõÄÏù¥ Îêú Ïàú</option>
                                    </select>
                                </div>
                                <div class="reviews-list"></div>
                            </div>
                            
                            <!-- About Tab -->
                            <div class="tab-content" data-content="about">
                                <div class="about-sections">
                                    <section class="about-section">
                                        <h3>ÏûêÍ∏∞ÏÜåÍ∞ú</h3>
                                        <div class="model-full-bio"></div>
                                    </section>
                                    <section class="about-section">
                                        <h3>Í≤ΩÎ†• ÏÇ¨Ìï≠</h3>
                                        <div class="model-experience-list"></div>
                                    </section>
                                    <section class="about-section">
                                        <h3>Î≥¥Ïú† Í∏∞Ïà†</h3>
                                        <div class="model-skills"></div>
                                    </section>
                                    <section class="about-section">
                                        <h3>ÏûëÏóÖ Ïä§ÌÉÄÏùº</h3>
                                        <div class="model-work-style"></div>
                                    </section>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bottom CTA -->
                        <div class="modal-footer">
                            <div class="package-selector">
                                <select class="package-select">
                                    <option>Ìå®ÌÇ§ÏßÄÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                </select>
                                <div class="selected-price">‚Ç©0</div>
                            </div>
                            <button class="btn btn-primary btn-large btn-order">
                                Ï£ºÎ¨∏ÌïòÍ∏∞
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // Add to body
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        this.modal = document.getElementById('modelDetailModal');
    }
    
    attachEventListeners() {
        // Close button
        this.modal.querySelector('.modal-close').addEventListener('click', () => this.close());
        this.modal.querySelector('.modal-overlay').addEventListener('click', () => this.close());
        
        // Tab navigation
        this.modal.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', (e) => this.switchTab(e.target.dataset.tab));
        });
        
        // Portfolio filters
        this.modal.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', (e) => this.filterPortfolio(e.target.dataset.filter));
        });
        
        // Contact button
        this.modal.querySelector('.btn-contact').addEventListener('click', () => this.handleContact());
        
        // Save button
        this.modal.querySelector('.btn-save').addEventListener('click', () => this.handleSave());
        
        // Order button
        this.modal.querySelector('.btn-order').addEventListener('click', () => this.handleOrder());
        
        // Package selector
        this.modal.querySelector('.package-select').addEventListener('change', (e) => this.selectPackage(e.target.value));
    }
    
    async open(modelId) {
        try {
            // Show loading state
            this.modal.classList.add('loading');
            this.modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Fetch model data
            const model = await this.fetchModelData(modelId);
            if (!model) {
                throw new Error('Model not found');
            }
            
            this.currentModel = model;
            this.renderModelData(model);
            
            // Remove loading state
            this.modal.classList.remove('loading');
            
            // Add animation class
            requestAnimationFrame(() => {
                this.modal.classList.add('active');
            });
            
            // Track view
            this.trackView(modelId);
            
        } catch (error) {
            console.error('Error opening model detail:', error);
            this.close();
            if (window.showToast) {
                window.showToast('Î™®Îç∏ Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.', 'error');
            }
        }
    }
    
    close() {
        this.modal.classList.remove('active');
        setTimeout(() => {
            this.modal.style.display = 'none';
            document.body.style.overflow = '';
            this.currentModel = null;
            this.selectedPackage = null;
        }, 300);
    }
    
    async fetchModelData(modelId) {
        // Fetch from Firebase using the adapter
        if (window.modelStorageAdapter) {
            return await window.modelStorageAdapter.getModel(modelId);
        } else if (window.modelStorage) {
            return await window.modelStorage.getModel(modelId);
        }
        return null;
    }
    
    renderModelData(model) {
        // Hero section
        this.modal.querySelector('.model-avatar-img').src = model.portfolio?.thumbnailUrl || '/images/default-avatar.png';
        this.modal.querySelector('.model-name').textContent = model.personalInfo?.name || 'Unknown Model';
        this.modal.querySelector('.model-tagline').textContent = model.profile?.tagline || 'ÌîÑÎ°úÌéòÏÖîÎÑê AI Î™®Îç∏';
        
        // Stats - Handle missing stats gracefully
        const ratingEl = this.modal.querySelector('.model-rating');
        const projectsEl = this.modal.querySelector('.model-projects');
        const responseEl = this.modal.querySelector('.model-response');
        
        if (ratingEl) ratingEl.textContent = (model.ratings?.overall || 0).toFixed(1);
        if (projectsEl) projectsEl.textContent = model.stats?.completedProjects || 0;
        if (responseEl) responseEl.textContent = `${model.stats?.responseTime || 2}ÏãúÍ∞Ñ`;
        
        // Badges
        if (model.profile?.verificationStatus?.identity) {
            this.modal.querySelector('.badge-verified').style.display = 'inline-flex';
        }
        if (model.profile?.verificationStatus?.premium) {
            this.modal.querySelector('.badge-pro').style.display = 'inline-flex';
        }
        if (model.flags?.newModel) {
            this.modal.querySelector('.badge-new').style.display = 'inline-flex';
        }
        
        // Online status
        const isOnline = model.availability?.status === 'available';
        this.modal.querySelector('.online-indicator').classList.toggle('online', isOnline);
        
        // Overview tab
        this.renderOverview(model);
        
        // Portfolio tab
        this.renderPortfolio(model);
        
        // Packages tab
        this.renderPackages(model);
        
        // Reviews tab
        this.renderReviews(model);
        
        // About tab
        this.renderAbout(model);
    }
    
    renderOverview(model) {
        // Bio
        this.modal.querySelector('.model-bio').textContent = 
            model.profile?.bio || 'ÏïàÎÖïÌïòÏÑ∏Ïöî! ÌîÑÎ°úÌéòÏÖîÎÑê AI Î™®Îç∏ÏûÖÎãàÎã§.';
        
        // Specialties
        const specialtiesContainer = this.modal.querySelector('.specialty-tags');
        specialtiesContainer.innerHTML = (model.profile?.specialties || ['fashion', 'beauty'])
            .map(specialty => `<span class="tag">${this.getSpecialtyName(specialty)}</span>`)
            .join('');
        
        // Languages
        const languagesContainer = this.modal.querySelector('.language-tags');
        languagesContainer.innerHTML = (model.profile?.languages || ['ko'])
            .map(lang => `<span class="tag">${this.getLanguageName(lang)}</span>`)
            .join('');
        
        // Quick stats
        this.modal.querySelector('.model-location').textContent = 
            model.profile?.location || 'ÏÑúÏö∏, ÎåÄÌïúÎØºÍµ≠';
        this.modal.querySelector('.model-experience').textContent = 
            model.profile?.experience || '1ÎÖÑ+';
        this.modal.querySelector('.model-joined').textContent = 
            this.formatDate(model.stats?.joinedDate);
        this.modal.querySelector('.model-repeat').textContent = 
            `${Math.round((model.stats?.repeatClients / Math.max(model.stats?.totalClients, 1)) * 100)}%`;
        
        // Portfolio preview
        this.renderPortfolioPreview(model);
    }
    
    renderPortfolio(model) {
        const portfolioGrid = this.modal.querySelector('.portfolio-grid');
        const gallery = model.portfolio?.gallery || [];
        
        if (gallery.length === 0) {
            portfolioGrid.innerHTML = '<p class="empty-state">ÏïÑÏßÅ Ìè¨Ìä∏Ìè¥Î¶¨Ïò§Í∞Ä ÏóÜÏäµÎãàÎã§.</p>';
            return;
        }
        
        portfolioGrid.innerHTML = gallery.map(item => `
            <div class="portfolio-item" data-category="${item.category || 'all'}">
                <img src="${item.url}" alt="${item.caption}" loading="lazy">
                <div class="portfolio-overlay">
                    <p>${item.caption || ''}</p>
                </div>
            </div>
        `).join('');
    }
    
    renderPackages(model) {
        const packagesGrid = this.modal.querySelector('.packages-grid');
        const packages = model.pricing?.packages || [];
        
        packagesGrid.innerHTML = packages.map(pkg => `
            <div class="package-card ${pkg.popular ? 'popular' : ''}" data-package-id="${pkg.id}">
                ${pkg.popular ? '<div class="popular-badge">Ïù∏Í∏∞</div>' : ''}
                <h3>${pkg.name}</h3>
                <div class="package-price">‚Ç©${pkg.price.toLocaleString()}</div>
                <p class="package-description">${pkg.description}</p>
                <ul class="package-features">
                    ${pkg.features.map(feature => `<li>${feature}</li>`).join('')}
                </ul>
                <div class="package-meta">
                    <span>üöö ${pkg.deliveryTime}Ïùº Ïù¥ÎÇ¥ ÏôÑÎ£å</span>
                    <span>üîÑ ${pkg.revisions === -1 ? 'Î¨¥Ï†úÌïú' : pkg.revisions + 'Ìöå'} ÏàòÏ†ï</span>
                </div>
                <button class="btn btn-primary btn-select-package" data-package-id="${pkg.id}">
                    ÏÑ†ÌÉùÌïòÍ∏∞
                </button>
            </div>
        `).join('');
        
        // Package selection
        packagesGrid.querySelectorAll('.btn-select-package').forEach(btn => {
            btn.addEventListener('click', () => this.selectPackage(btn.dataset.packageId));
        });
        
        // Update package selector
        const packageSelect = this.modal.querySelector('.package-select');
        packageSelect.innerHTML = '<option value="">Ìå®ÌÇ§ÏßÄÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>' +
            packages.map(pkg => 
                `<option value="${pkg.id}">
                    ${pkg.name} - ‚Ç©${pkg.price.toLocaleString()}
                </option>`
            ).join('');
    }
    
    renderReviews(model) {
        // This would fetch and render actual reviews
        // For now, show placeholder
        const reviewsList = this.modal.querySelector('.reviews-list');
        reviewsList.innerHTML = '<p class="empty-state">ÏïÑÏßÅ Î¶¨Î∑∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>';
    }
    
    renderAbout(model) {
        this.modal.querySelector('.model-full-bio').innerHTML = 
            model.profile?.bio || 'ÏûêÏÑ∏Ìïú ÏÜåÍ∞úÍ∞Ä ÏïÑÏßÅ ÏûëÏÑ±ÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.';
    }
    
    renderPortfolioPreview(model) {
        const preview = this.modal.querySelector('.portfolio-preview');
        const gallery = model.portfolio?.gallery || [];
        const previewItems = gallery.slice(0, 6);
        
        if (previewItems.length === 0) {
            preview.innerHTML = '<p>Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Ï§ÄÎπÑ Ï§ë</p>';
            return;
        }
        
        preview.innerHTML = `
            <div class="preview-grid">
                ${previewItems.map(item => `
                    <div class="preview-item">
                        <img src="${item.thumbnailUrl || item.url}" alt="${item.caption}" loading="lazy">
                    </div>
                `).join('')}
            </div>
            ${gallery.length > 6 ? 
                `<button class="btn-view-all" onclick="modelDetailModal.switchTab('portfolio')">
                    Ï†ÑÏ≤¥ Î≥¥Í∏∞ (${gallery.length}Í∞ú)
                </button>` : ''
            }
        `;
    }
    
    switchTab(tabName) {
        // Update nav tabs
        this.modal.querySelectorAll('.nav-tab').forEach(tab => {
            tab.classList.toggle('active', tab.dataset.tab === tabName);
        });
        
        // Update content
        this.modal.querySelectorAll('.tab-content').forEach(content => {
            content.classList.toggle('active', content.dataset.content === tabName);
        });
    }
    
    filterPortfolio(filter) {
        const items = this.modal.querySelectorAll('.portfolio-item');
        const buttons = this.modal.querySelectorAll('.filter-btn');
        
        buttons.forEach(btn => {
            btn.classList.toggle('active', btn.dataset.filter === filter);
        });
        
        items.forEach(item => {
            if (filter === 'all' || item.dataset.category === filter) {
                item.style.display = '';
            } else {
                item.style.display = 'none';
            }
        });
    }
    
    selectPackage(packageId) {
        if (!packageId || !this.currentModel) return;
        
        const pkg = this.currentModel.pricing?.packages?.find(p => p.id === packageId);
        if (!pkg) return;
        
        this.selectedPackage = pkg;
        
        // Update UI
        this.modal.querySelector('.package-select').value = packageId;
        this.modal.querySelector('.selected-price').textContent = `‚Ç©${pkg.price.toLocaleString()}`;
        
        // Highlight selected package
        this.modal.querySelectorAll('.package-card').forEach(card => {
            card.classList.toggle('selected', card.dataset.packageId === packageId);
        });
    }
    
    handleContact() {
        if (!this.currentModel) return;
        
        // This would open a contact form or messaging system
        console.log('Contact model:', this.currentModel.id);
        if (window.showToast) {
            window.showToast('Î¨∏Ïùò Í∏∞Îä•ÏùÄ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.', 'info');
        }
    }
    
    handleSave() {
        if (!this.currentModel) return;
        
        // This would save to favorites
        console.log('Save model:', this.currentModel.id);
        
        const btn = this.modal.querySelector('.btn-save');
        btn.classList.toggle('saved');
        btn.querySelector('.btn-icon').textContent = btn.classList.contains('saved') ? '‚ô•' : '‚ô°';
        
        if (window.showToast) {
            window.showToast(
                btn.classList.contains('saved') ? 'Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!' : 'Ï†ÄÏû• Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.',
                'success'
            );
        }
    }
    
    handleOrder() {
        if (!this.currentModel || !this.selectedPackage) {
            if (window.showToast) {
                window.showToast('Ìå®ÌÇ§ÏßÄÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'warning');
            }
            return;
        }
        
        // This would initiate the order process
        console.log('Order:', this.currentModel.id, this.selectedPackage.id);
        if (window.showToast) {
            window.showToast('Ï£ºÎ¨∏ Í∏∞Îä•ÏùÄ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.', 'info');
        }
    }
    
    trackView(modelId) {
        // Track profile view
        if (window.analytics) {
            window.analytics.track('Model Profile Viewed', {
                modelId: modelId
            });
        }
    }
    
    // Utility functions
    getSpecialtyName(specialty) {
        const names = {
            'fashion': 'Ìå®ÏÖò',
            'beauty': 'Î∑∞Ìã∞',
            'lifestyle': 'ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº',
            'food': 'Ìë∏Îìú',
            'tech': 'ÌÖåÌÅ¨',
            'sports': 'Ïä§Ìè¨Ï∏†',
            'entertainment': 'ÏóîÌÑ∞ÌÖåÏù∏Î®ºÌä∏'
        };
        return names[specialty] || specialty;
    }
    
    getLanguageName(lang) {
        const names = {
            'ko': 'ÌïúÍµ≠Ïñ¥',
            'en': 'ÏòÅÏñ¥',
            'ja': 'ÏùºÎ≥∏Ïñ¥',
            'zh': 'Ï§ëÍµ≠Ïñ¥',
            'es': 'Ïä§ÌéòÏù∏Ïñ¥',
            'fr': 'ÌîÑÎûëÏä§Ïñ¥'
        };
        return names[lang] || lang;
    }
    
    formatDate(dateString) {
        if (!dateString) return 'ÏµúÍ∑º';
        const date = new Date(dateString);
        return `${date.getFullYear()}ÎÖÑ ${date.getMonth() + 1}Ïõî`;
    }
}

// Create global instance
window.modelDetailModal = new ModelDetailModal();