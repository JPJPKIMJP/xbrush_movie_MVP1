<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Login Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
        input, button { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px; }
        button { background: #667eea; color: white; cursor: pointer; }
        button:hover { background: #5a67d8; }
        .result { margin: 20px 0; padding: 10px; border-radius: 5px; }
        .success { background: #e6ffe6; border: 1px solid #00aa00; }
        .error { background: #ffe6e6; border: 1px solid #ff0000; }
        .info { background: #e6f3ff; border: 1px solid #0066cc; }
    </style>
</head>
<body>
    <h1>Firebase ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h1>
    
    <div>
        <h3>í…ŒìŠ¤íŠ¸ ê³„ì • ì •ë³´:</h3>
        <p>ì´ë©”ì¼: test@xbrush.com</p>
        <p>ë¹„ë°€ë²ˆí˜¸: test123456</p>
    </div>
    
    <form id="loginForm">
        <input type="email" id="email" placeholder="ì´ë©”ì¼" value="test@xbrush.com" required>
        <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" value="test123456" required>
        <button type="submit">ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</button>
    </form>
    
    <button onclick="createTestUser()">í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„±</button>
    <button onclick="resetPassword()">ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</button>
    
    <div id="result"></div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <!-- Config -->
    <script src="js/config.js"></script>
    
    <script>
        const resultDiv = document.getElementById('result');
        
        function showResult(message, type = 'info') {
            console.log(message);
            resultDiv.innerHTML = `<div class="result ${type}">${message}</div>`;
        }

        // Initialize Firebase
        if (window.AppConfig) {
            try {
                const config = window.AppConfig.getFirebaseConfig();
                firebase.initializeApp(config);
                showResult('âœ… Firebase ì´ˆê¸°í™” ì„±ê³µ', 'success');
            } catch (error) {
                showResult('âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // Login form handler
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            showResult('ğŸ”„ ë¡œê·¸ì¸ ì‹œë„ ì¤‘...', 'info');
            
            try {
                const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                showResult(`âœ… ë¡œê·¸ì¸ ì„±ê³µ!<br>
                    ì´ë©”ì¼: ${user.email}<br>
                    UID: ${user.uid}<br>
                    ì´ë©”ì¼ ì¸ì¦: ${user.emailVerified ? 'ì™„ë£Œ' : 'ë¯¸ì™„ë£Œ'}`, 'success');
                
            } catch (error) {
                console.error('Login error:', error);
                showResult(`âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨<br>
                    ì˜¤ë¥˜ ì½”ë“œ: ${error.code}<br>
                    ì˜¤ë¥˜ ë©”ì‹œì§€: ${error.message}`, 'error');
            }
        });

        async function createTestUser() {
            showResult('ğŸ”„ í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„± ì¤‘...', 'info');
            
            try {
                const userCredential = await firebase.auth().createUserWithEmailAndPassword('test@xbrush.com', 'test123456');
                const user = userCredential.user;
                
                await user.updateProfile({
                    displayName: 'Test User'
                });
                
                showResult(`âœ… ê³„ì • ìƒì„± ì„±ê³µ!<br>
                    ì´ë©”ì¼: ${user.email}<br>
                    UID: ${user.uid}`, 'success');
                
            } catch (error) {
                showResult(`âŒ ê³„ì • ìƒì„± ì‹¤íŒ¨<br>
                    ì˜¤ë¥˜ ì½”ë“œ: ${error.code}<br>
                    ì˜¤ë¥˜ ë©”ì‹œì§€: ${error.message}`, 'error');
            }
        }

        async function resetPassword() {
            const email = document.getElementById('email').value;
            
            if (!email) {
                showResult('âŒ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }
            
            try {
                await firebase.auth().sendPasswordResetEmail(email);
                showResult(`âœ… ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì´ë©”ì¼ì„ ${email}ë¡œ ì „ì†¡í–ˆìŠµë‹ˆë‹¤.`, 'success');
            } catch (error) {
                showResult(`âŒ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì‹¤íŒ¨<br>
                    ì˜¤ë¥˜ ì½”ë“œ: ${error.code}<br>
                    ì˜¤ë¥˜ ë©”ì‹œì§€: ${error.message}`, 'error');
            }
        }

        // Auth state listener
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                console.log('ì‚¬ìš©ì ë¡œê·¸ì¸ë¨:', user.email);
            } else {
                console.log('ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒë¨');
            }
        });
    </script>
</body>
</html>