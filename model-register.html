<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XBrush 모델 등록</title>
    
    <!-- Favicon to prevent 404 error -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='50' x='50' text-anchor='middle' font-size='60' fill='%23667eea'>X</text></svg>" type="image/svg+xml">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="model-showcase.css">
    <link rel="stylesheet" href="model-register.css">
    <link rel="stylesheet" href="css/mobile-overrides.css"><!-- Load last for proper cascade -->
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="XBrush AI 모델 등록 - 당신의 얼굴로 AI 모델이 되어 수익을 창출하세요">
    <meta name="keywords" content="AI 모델, 얼굴 등록, 수익 창출, XBrush">
    <meta name="author" content="XBrush">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="XBrush 모델 등록">
    <meta property="og:description" content="AI 모델 등록으로 새로운 수익 기회를 만나보세요">
    <meta property="og:type" content="website">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <!-- Site Header -->
    <header class="site-header">
        <div class="header-container">
            <a href="https://jpjpkimjp.github.io/xbrush_movie_MVP1/index.html" class="logo-section" style="text-decoration: none;">
                <h1 class="logo">XBrush</h1>
                <span class="logo-subtitle">Model Registration</span>
            </a>
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="메뉴 열기">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <nav class="header-nav" id="headerNav">
                <a href="index.html" class="nav-link">동영상 제작</a>
                <a href="models.html" class="nav-link">모델 쇼케이스</a>
                <a href="model-register.html" class="nav-link active">모델 등록</a>
            </nav>
        </div>
    </header>

    <div class="container" style="padding-top: 20px;">
        <!-- Registration Header -->
        <header class="model-register-header">
            <div class="header-content">
                <div class="brand-section">
                    <h1 class="brand-title">모델 등록</h1>
                    <p class="brand-subtitle">AI 모델이 되어 새로운 수익을 창출하세요</p>
                </div>
                <div class="progress-indicator">
                    <div class="step-indicator" id="stepIndicator">
                        <span class="current-step">1</span> / <span class="total-steps">7</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Simple Progress Bar -->
        <div class="simple-progress-bar">
            <div class="progress-info">
                <span class="progress-step-text" id="progressStepText">1/7 단계 - 진입 안내</span>
            </div>
            <div class="progress-track">
                <div class="progress-fill" id="simpleProgressFill"></div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="model-content-area">
            <!-- Step 1: Entry & Qualification Guide -->
            <section class="step-content active" id="modelStep1">
                <div class="step-header">
                    <div class="step-badge">단계 1/7</div>
                    <h1 class="step-title">모델 되기 시작하기</h1>
                    <p class="step-description">AI 모델 등록을 위한 준비사항을 확인해주세요</p>
                </div>
                
                <div class="qualification-card">
                    <div class="card-header">
                        <h2 class="card-title">✨ AI 모델이 되면?</h2>
                    </div>
                    <div class="benefits-grid">
                        <div class="benefit-item">
                            <div class="benefit-icon">💰</div>
                            <h3>수익 창출</h3>
                            <p>당신의 얼굴로 제작된 광고 영상마다 수익 발생</p>
                        </div>
                        <div class="benefit-item">
                            <div class="benefit-icon">🎬</div>
                            <h3>자동 생성</h3>
                            <p>AI가 자동으로 다양한 광고 영상 제작</p>
                        </div>
                        <div class="benefit-item">
                            <div class="benefit-icon">🔒</div>
                            <h3>안전한 사용</h3>
                            <p>계약 조건에 따른 안전하고 투명한 사용</p>
                        </div>
                        <div class="benefit-item">
                            <div class="benefit-icon">📈</div>
                            <h3>지속적 수익</h3>
                            <p>한 번 등록으로 지속적인 수익 기회</p>
                        </div>
                    </div>
                </div>

                <div class="requirements-card">
                    <div class="card-header">
                        <h2 class="card-title">📋 필수 준비사항</h2>
                        <p class="card-subtitle">등록을 위해 다음 항목들을 미리 준비해주세요</p>
                    </div>
                    
                    <div class="requirements-list">
                        <div class="requirement-item">
                            <div class="requirement-icon">📄</div>
                            <div class="requirement-content">
                                <h3>실명 기반 신분증</h3>
                                <p>여권, 주민등록증, 운전면허증 중 하나</p>
                                <span class="requirement-status">필수</span>
                            </div>
                        </div>
                        
                        <div class="requirement-item">
                            <div class="requirement-icon">📸</div>
                            <div class="requirement-content">
                                <h3>얼굴 정면 사진</h3>
                                <p>깨끗한 배경, 좋은 조명에서 촬영된 고화질 사진</p>
                                <span class="requirement-status">필수</span>
                            </div>
                        </div>
                        
                        <div class="requirement-item">
                            <div class="requirement-icon">🎥</div>
                            <div class="requirement-content">
                                <h3>동영상 촬영 환경</h3>
                                <p>웹캠 또는 스마트폰으로 5초 이상 촬영 가능한 환경</p>
                                <span class="requirement-status">필수</span>
                            </div>
                        </div>
                        
                        <div class="requirement-item">
                            <div class="requirement-icon">🖼️</div>
                            <div class="requirement-content">
                                <h3>포트폴리오 이미지</h3>
                                <p>최소 10장 이상의 고해상도 이미지 (2,048px 이상 권장)</p>
                                <span class="requirement-status">필수</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="terms-preview-card">
                    <div class="card-header">
                        <h2 class="card-title">📄 주요 약관 미리보기</h2>
                    </div>
                    <div class="terms-content">
                        <ul class="terms-list">
                            <li>만 18세 이상만 등록 가능합니다</li>
                            <li>등록된 이미지는 AI 모델 훈련에만 사용됩니다</li>
                            <li>계약 조건에 따라 사용 범위와 수익 배분이 결정됩니다</li>
                            <li>언제든지 계약을 해지하고 데이터 삭제를 요청할 수 있습니다</li>
                            <li>부적절한 용도로 사용될 경우 즉시 차단됩니다</li>
                        </ul>
                    </div>
                </div>

                <div class="action-section">
                    <div class="action-buttons">
                        <button class="btn btn-outline" onclick="goBack()">뒤로 가기</button>
                        <button class="btn btn-primary btn-large" onclick="startModelRegistration()">
                            🚀 모델 등록 시작하기
                        </button>
                    </div>
                </div>
            </section>

            <!-- Step 2: KYC 2-Step Verification -->
            <section class="step-content" id="modelStep2">
                <div class="step-header">
                    <div class="step-badge">단계 2/7</div>
                    <h1 class="step-title">본인 인증 (KYC)</h1>
                    <p class="step-description">안전한 모델 등록을 위해 2단계 본인 인증을 진행합니다</p>
                </div>
                
                <!-- Admin Skip Button -->
                <div class="admin-skip-section">
                    <button class="btn btn-outline admin-skip-btn" onclick="adminSkipKYC()">
                        ⚡ 관리자 권한으로 인증 건너뛰기
                    </button>
                    <p class="admin-skip-note">테스트 및 개발용 기능입니다</p>
                </div>

                <!-- Sub-step 1-A: Face Recognition -->
                <div class="kyc-section" id="kycStepA">
                    <div class="kyc-header">
                        <h2 class="kyc-title">1-A. 얼굴 인식 및 신분증 확인</h2>
                        <div class="kyc-status" id="kycAStatus">대기 중</div>
                    </div>
                    
                    <div class="kyc-content">
                        <div class="verification-grid">
                            <div class="verification-section">
                                <h3>📄 신분증 업로드</h3>
                                <div class="id-upload-area" id="idUploadArea">
                                    <div class="upload-placeholder">
                                        <div class="upload-icon">📄</div>
                                        <p>신분증을 업로드해주세요</p>
                                        <button class="btn btn-outline">파일 선택</button>
                                    </div>
                                    <input type="file" id="idUpload" accept="image/*" hidden>
                                </div>
                                <div class="upload-guidelines">
                                    <ul>
                                        <li>여권, 주민등록증, 운전면허증 가능</li>
                                        <li>텍스트가 선명하게 보여야 합니다</li>
                                        <li>전체가 프레임 안에 들어와야 합니다</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="verification-section">
                                <h3>📸 실시간 얼굴 촬영</h3>
                                <div class="face-capture-area">
                                    <div class="camera-container" id="cameraContainer">
                                        <video id="faceVideo" autoplay muted></video>
                                        <canvas id="faceCanvas" hidden></canvas>
                                        <div class="face-guide-overlay">
                                            <div class="face-guide-circle"></div>
                                            <p class="guide-text">얼굴을 원 안에 맞춰주세요</p>
                                        </div>
                                    </div>
                                    <div class="capture-controls">
                                        <button class="btn btn-primary" id="startCamera">카메라 시작</button>
                                        <button class="btn btn-primary hidden" id="capturePhoto">사진 촬영</button>
                                        <button class="btn btn-outline hidden" id="retakePhoto">다시 촬영</button>
                                    </div>
                                </div>
                                <div class="capture-guidelines">
                                    <ul>
                                        <li>정면을 바라보고 촬영해주세요</li>
                                        <li>충분한 조명이 있는 곳에서 촬영</li>
                                        <li>안경, 모자 등을 착용하지 마세요</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="verification-result" id="verificationAResult" style="display: none;">
                            <div class="result-content">
                                <div class="result-icon" id="resultAIcon">⏳</div>
                                <div class="result-text" id="resultAText">검증 중...</div>
                                <div class="result-details" id="resultADetails"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sub-step 1-B: Video + Random Code -->
                <div class="kyc-section disabled" id="kycStepB">
                    <div class="kyc-header">
                        <h2 class="kyc-title">1-B. 동영상 + 난수 코드 인증</h2>
                        <div class="kyc-status" id="kycBStatus">대기 중</div>
                    </div>
                    
                    <div class="kyc-content">
                        <div class="random-code-section">
                            <div class="code-display">
                                <h3>화면에 표시된 숫자를 소리내어 읽어주세요</h3>
                                <div class="random-code" id="randomCode">------</div>
                                <button class="btn btn-outline" id="generateCode">새 코드 생성</button>
                            </div>
                        </div>
                        
                        <div class="video-recording-area">
                            <div class="recording-container">
                                <video id="recordingVideo" autoplay muted></video>
                                <canvas id="recordingCanvas" hidden></canvas>
                                <div class="recording-overlay">
                                    <div class="recording-status" id="recordingStatus">준비</div>
                                    <div class="recording-timer" id="recordingTimer">00:00</div>
                                </div>
                            </div>
                            
                            <div class="recording-controls">
                                <button class="btn btn-primary" id="startRecording">녹화 시작</button>
                                <button class="btn btn-danger hidden" id="stopRecording">녹화 중지</button>
                                <button class="btn btn-outline hidden" id="retakeVideo">다시 녹화</button>
                            </div>
                            
                            <div class="recording-guidelines">
                                <ul>
                                    <li>최소 5초 이상 녹화해주세요</li>
                                    <li>화면의 6자리 숫자를 명확하게 발음</li>
                                    <li>얼굴이 화면에서 벗어나지 않도록 주의</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="verification-result" id="verificationBResult" style="display: none;">
                            <div class="result-content">
                                <div class="result-icon" id="resultBIcon">⏳</div>
                                <div class="result-text" id="resultBText">검증 중...</div>
                                <div class="result-details" id="resultBDetails"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="kyc-attempts">
                    <div class="attempts-info">
                        <span class="attempts-text">시도 횟수: <span id="kycAttempts">0</span>/3</span>
                        <span class="attempts-warning">3회 실패 시 24시간 후 재시도 가능</span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevModelStep()">이전 단계</button>
                    <button class="btn btn-primary" id="step1Next" onclick="nextModelStep()" disabled>다음 단계</button>
                </div>
            </section>

            <!-- Step 3: Contract Conditions -->
            <section class="step-content" id="modelStep3">
                <div class="step-header">
                    <div class="step-badge">단계 3/5</div>
                    <h1 class="step-title">계약 조건 설정</h1>
                    <p class="step-description">수익 배분, 계약 기간, 사용 범위를 설정해주세요</p>
                </div>

                <!-- Pricing Policy -->
                <div class="contract-section">
                    <h2 class="section-title">💰 가격 정책</h2>
                    <div class="pricing-options">
                        <label class="pricing-option">
                            <input type="radio" name="pricingType" value="flat" checked>
                            <div class="option-content">
                                <h3>정액제</h3>
                                <p>영상 컷당 고정 금액</p>
                                <div class="price-input-group">
                                    <input type="number" id="flatRate" placeholder="100000" min="10000" step="10000">
                                    <span>원 / 컷</span>
                                </div>
                            </div>
                        </label>
                        
                        <label class="pricing-option">
                            <input type="radio" name="pricingType" value="share">
                            <div class="option-content">
                                <h3>수익 쉐어</h3>
                                <p>매출의 일정 비율</p>
                                <div class="price-input-group">
                                    <input type="number" id="shareRate" placeholder="30" min="10" max="80" step="5">
                                    <span>% / 매출</span>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Contract Period -->
                <div class="contract-section">
                    <h2 class="section-title">📅 계약 기간</h2>
                    <div class="period-options">
                        <label class="period-option">
                            <input type="radio" name="contractPeriod" value="3" checked>
                            <div class="period-content">
                                <span class="period-number">3</span>
                                <span class="period-unit">개월</span>
                            </div>
                        </label>
                        
                        <label class="period-option">
                            <input type="radio" name="contractPeriod" value="6">
                            <div class="period-content">
                                <span class="period-number">6</span>
                                <span class="period-unit">개월</span>
                            </div>
                        </label>
                        
                        <label class="period-option">
                            <input type="radio" name="contractPeriod" value="12">
                            <div class="period-content">
                                <span class="period-number">12</span>
                                <span class="period-unit">개월</span>
                            </div>
                        </label>
                        
                        <label class="period-option">
                            <input type="radio" name="contractPeriod" value="24">
                            <div class="period-content">
                                <span class="period-number">24</span>
                                <span class="period-unit">개월</span>
                            </div>
                        </label>
                        
                        <label class="period-option custom-period">
                            <input type="radio" name="contractPeriod" value="custom">
                            <div class="period-content">
                                <input type="number" id="customPeriod" placeholder="12" min="1" max="60">
                                <span class="period-unit">개월</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Usage Scope -->
                <div class="contract-section">
                    <h2 class="section-title">🎯 사용 범위</h2>
                    
                    <div class="scope-category">
                        <h3 class="category-title">기본 범위 (자동 승인)</h3>
                        <div class="scope-options basic-scope">
                            <label class="scope-option">
                                <input type="checkbox" name="basicScope" value="commercial" checked disabled>
                                <span class="checkmark"></span>
                                <div class="scope-content">
                                    <h4>일반 상업 광고</h4>
                                    <p>제품, 서비스 홍보 영상</p>
                                </div>
                            </label>
                            
                            <label class="scope-option">
                                <input type="checkbox" name="basicScope" value="sns" checked disabled>
                                <span class="checkmark"></span>
                                <div class="scope-content">
                                    <h4>SNS 마케팅</h4>
                                    <p>소셜미디어 광고 콘텐츠</p>
                                </div>
                            </label>
                            
                            <label class="scope-option">
                                <input type="checkbox" name="basicScope" value="search" checked disabled>
                                <span class="checkmark"></span>
                                <div class="scope-content">
                                    <h4>검색 광고</h4>
                                    <p>구글, 네이버 등 검색 엔진 광고</p>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="scope-category">
                        <h3 class="category-title">고위험 범위 (추가 승인 필요)</h3>
                        <div class="scope-options high-risk-scope">
                            <label class="scope-option">
                                <input type="checkbox" name="highRiskScope" value="medical">
                                <span class="checkmark"></span>
                                <div class="scope-content">
                                    <h4>의료 광고</h4>
                                    <p>성형외과, 한의원 등</p>
                                    <span class="risk-badge">추가 승인</span>
                                </div>
                            </label>
                            
                            <label class="scope-option">
                                <input type="checkbox" name="highRiskScope" value="alcohol">
                                <span class="checkmark"></span>
                                <div class="scope-content">
                                    <h4>주류 및 유흥</h4>
                                    <p>주류, 유흥업소 광고</p>
                                    <span class="risk-badge">추가 승인</span>
                                </div>
                            </label>
                            
                            <label class="scope-option">
                                <input type="checkbox" name="highRiskScope" value="political">
                                <span class="checkmark"></span>
                                <div class="scope-content">
                                    <h4>정치 및 선거</h4>
                                    <p>정치 캠페인, 선거 광고</p>
                                    <span class="risk-badge">추가 승인</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 2nd Confirmation Option -->
                <div class="contract-section">
                    <h2 class="section-title">✅ 2차 컨펌 옵션</h2>
                    <div class="confirmation-option">
                        <label class="toggle-option">
                            <input type="checkbox" id="secondConfirm">
                            <span class="toggle-slider"></span>
                            <div class="toggle-content">
                                <h3>사전 검토 권리</h3>
                                <p>생성된 LoRA 결과물을 사전에 검토하고 거절할 권리를 부여받습니다</p>
                                <span class="toggle-note">활성화하면 모든 생성 결과물에 대해 승인/거절 권한을 가집니다</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Contract Preview -->
                <div class="contract-preview">
                    <h2 class="section-title">📄 계약서 미리보기</h2>
                    <div class="contract-summary" id="contractSummary">
                        <div class="summary-item">
                            <span class="summary-label">가격 정책:</span>
                            <span class="summary-value" id="summaryPricing">정액 100,000원/컷</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">계약 기간:</span>
                            <span class="summary-value" id="summaryPeriod">3개월</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">기본 범위:</span>
                            <span class="summary-value">일반 상업, SNS, 검색 광고</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">고위험 범위:</span>
                            <span class="summary-value" id="summaryHighRisk">선택 안함</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">2차 컨펌:</span>
                            <span class="summary-value" id="summaryConfirm">비활성화</span>
                        </div>
                    </div>
                </div>

                <!-- Electronic Signature -->
                <div class="signature-section">
                    <h2 class="section-title">✍️ 전자 서명</h2>
                    <div class="signature-area">
                        <canvas id="signatureCanvas" width="400" height="200"></canvas>
                        <div class="signature-controls">
                            <button class="btn btn-outline" id="clearSignature">지우기</button>
                            <span class="signature-note">위 영역에 서명해주세요</span>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevModelStep()">이전 단계</button>
                    <button class="btn btn-primary" id="step2Next" onclick="nextModelStep()" disabled>계약 완료 및 다음 단계</button>
                </div>
            </section>

            <!-- Remaining steps will be added in subsequent parts -->
            <!-- Step 4: Portfolio Upload -->
            <section class="step-content" id="modelStep4">
                <div class="step-header">
                    <div class="step-badge">단계 4/5</div>
                    <h1 class="step-title">포트폴리오 업로드</h1>
                    <p class="step-description">고품질 이미지를 업로드해주세요</p>
                </div>
                
                <div class="portfolio-upload-area">
                    <div class="upload-guidelines">
                        <h2>📸 업로드 가이드라인</h2>
                        <div class="guidelines-grid">
                            <div class="guideline-item">
                                <div class="guideline-icon">📏</div>
                                <h3>해상도</h3>
                                <p>2,048px 이상 권장<br>최소 1,024px</p>
                            </div>
                            <div class="guideline-item">
                                <div class="guideline-icon">💡</div>
                                <h3>조명</h3>
                                <p>자연광 권장<br>그림자 최소화</p>
                            </div>
                            <div class="guideline-item">
                                <div class="guideline-icon">🎭</div>
                                <h3>표정</h3>
                                <p>다양한 표정<br>자연스러운 포즈</p>
                            </div>
                            <div class="guideline-item">
                                <div class="guideline-icon">🖼️</div>
                                <h3>배경</h3>
                                <p>깔끔한 배경<br>얼굴에 집중</p>
                            </div>
                        </div>
                    </div>

                    <div class="upload-section">
                        <div class="upload-dropzone" id="portfolioDropzone">
                            <div class="dropzone-content">
                                <div class="dropzone-icon">📁</div>
                                <h3>이미지를 드래그하거나 클릭하여 업로드</h3>
                                <p>최소 10장, 최대 50장까지 업로드 가능</p>
                                <button class="btn btn-primary">파일 선택</button>
                            </div>
                            <input type="file" id="portfolioFiles" multiple accept="image/*" hidden>
                        </div>
                        
                        <div class="upload-progress" id="uploadProgress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="uploadProgressFill"></div>
                            </div>
                            <span class="progress-text" id="uploadProgressText">0% 완료</span>
                        </div>
                    </div>

                    <div class="portfolio-gallery" id="portfolioGallery">
                        <div class="gallery-header">
                            <h3>업로드된 이미지 (<span id="imageCount">0</span>/50)</h3>
                            <div class="gallery-controls">
                                <button class="btn btn-outline" id="selectAllImages">전체 선택</button>
                                <button class="btn btn-outline" id="deleteSelectedImages">선택 삭제</button>
                            </div>
                        </div>
                        <div class="gallery-grid" id="galleryGrid">
                            <!-- Images will be dynamically added here -->
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevModelStep()">이전 단계</button>
                    <button class="btn btn-primary" id="step4Next" onclick="nextModelStep()" disabled>다음 단계</button>
                </div>
            </section>

            <!-- Step 5: Product Registration -->
            <section class="step-content" id="modelStep5">
                <div class="step-header">
                    <div class="step-badge">단계 5/7</div>
                    <h1 class="step-title">제품 등록 설정</h1>
                    <p class="step-description">모델 프로필과 제품 정보를 설정해주세요</p>
                </div>

                <div class="product-registration-form">
                    <!-- Thumbnail Settings -->
                    <div class="form-section">
                        <h3>📸 프로필 썸네일 설정</h3>
                        <div class="thumbnail-selection-area">
                            <div class="thumbnail-current">
                                <div class="thumbnail-preview-container">
                                    <div class="thumbnail-placeholder" id="thumbnailPlaceholder">
                                        <div class="placeholder-icon">🖼️</div>
                                        <p>포트폴리오에서 썸네일을 선택하세요</p>
                                    </div>
                                    <img id="thumbnailPreview" src="" alt="썸네일 미리보기" style="display: none;">
                                </div>
                                <div class="thumbnail-actions">
                                    <button class="btn btn-primary" onclick="openThumbnailSelector()">썸네일 선택</button>
                                    <button class="btn btn-outline" onclick="resetThumbnail()" style="display: none;" id="resetThumbnailBtn">다시 선택</button>
                                </div>
                            </div>
                            <div class="thumbnail-guidelines">
                                <h4>권장 사항:</h4>
                                <ul>
                                    <li>정사각형 비율 (1:1)</li>
                                    <li>얼굴이 선명하게 보이는 이미지</li>
                                    <li>깔끔한 배경</li>
                                    <li>고품질 이미지</li>
                                </ul>
                                <p class="note">포트폴리오에 업로드된 이미지 중에서 선택하세요</p>
                            </div>
                        </div>
                    </div>

                    <!-- Model Information -->
                    <div class="form-section">
                        <h3>✏️ 모델 정보</h3>
                        <div class="form-group">
                            <label for="modelName">모델명 *</label>
                            <input type="text" id="modelName" 
                                   placeholder="예: 김지수" maxlength="20">
                            <div class="form-help">실제 이름 또는 활동명을 입력해주세요</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="modelIntro">한 줄 소개 *</label>
                            <input type="text" id="modelIntro" 
                                   placeholder="예: 밝고 친근한 20대 여성 모델입니다" maxlength="50">
                            <div class="form-help">모델의 매력을 한 줄로 표현해주세요 (최대 50자)</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="modelDescription">상세 설명</label>
                            <textarea id="modelDescription" rows="4" 
                                      placeholder="모델의 특징, 장점, 활용 가능한 분야 등을 자세히 설명해주세요" maxlength="200"></textarea>
                            <div class="form-help">상세한 설명일수록 더 많은 기회를 얻을 수 있습니다 (최대 200자)</div>
                        </div>
                    </div>

                    <!-- Professional Profile Section -->
                    <div class="form-section">
                        <h3>💼 전문 프로필</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="modelTagline">프로 태그라인</label>
                                <input type="text" id="modelTagline" 
                                       placeholder="예: 전문 패션 모델 | 10년 경력" maxlength="50">
                                <div class="form-help">전문성을 나타내는 한 줄</div>
                            </div>
                            <div class="form-group">
                                <label for="modelExperience">경력</label>
                                <select id="modelExperience">
                                    <option value="">선택하세요</option>
                                    <option value="0-1년">0-1년</option>
                                    <option value="1-3년">1-3년</option>
                                    <option value="3-5년">3-5년</option>
                                    <option value="5-10년">5-10년</option>
                                    <option value="10년+">10년 이상</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="modelLocation">활동 지역</label>
                                <input type="text" id="modelLocation" 
                                       placeholder="예: 서울, 대한민국" maxlength="30">
                            </div>
                            <div class="form-group">
                                <label>사용 가능 언어</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" name="modelLanguages" value="ko" checked> 한국어</label>
                                    <label><input type="checkbox" name="modelLanguages" value="en"> 영어</label>
                                    <label><input type="checkbox" name="modelLanguages" value="ja"> 일본어</label>
                                    <label><input type="checkbox" name="modelLanguages" value="zh"> 중국어</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pricing Packages -->
                    <div class="form-section">
                        <h3>💰 가격 패키지 설정</h3>
                        <p class="section-description">기본 가격은 계약 단계에서 설정한 금액을 기준으로 합니다</p>
                        <div class="pricing-packages">
                            <div class="package-card">
                                <h4>베이직</h4>
                                <div class="form-group">
                                    <label>가격</label>
                                    <input type="number" id="basicPrice" value="100000" min="50000">
                                    <div class="form-help">AI 이미지 10장 기준</div>
                                </div>
                            </div>
                            <div class="package-card popular">
                                <div class="popular-badge">인기</div>
                                <h4>스탠다드</h4>
                                <div class="form-group">
                                    <label>가격</label>
                                    <input type="number" id="standardPrice" value="200000" min="100000">
                                    <div class="form-help">AI 이미지 30장 기준</div>
                                </div>
                            </div>
                            <div class="package-card">
                                <h4>프리미엄</h4>
                                <div class="form-group">
                                    <label>가격</label>
                                    <input type="number" id="premiumPrice" value="500000" min="300000">
                                    <div class="form-help">맞춤형 패키지</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Availability Settings -->
                    <div class="form-section">
                        <h3>📅 가용성 설정</h3>
                        <div class="form-group">
                            <label>현재 상태</label>
                            <select id="availabilityStatus">
                                <option value="available">즉시 가능</option>
                                <option value="busy">일정 조율 필요</option>
                                <option value="vacation">휴가 중</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="responseTime">평균 응답 시간</label>
                            <select id="responseTime">
                                <option value="1">1시간 이내</option>
                                <option value="2" selected>2시간 이내</option>
                                <option value="4">4시간 이내</option>
                                <option value="8">8시간 이내</option>
                                <option value="24">24시간 이내</option>
                            </select>
                        </div>
                    </div>

                    <!-- Category Selection -->
                    <div class="form-section">
                        <h3>🎯 모델 카테고리 선택</h3>
                        <p class="section-description">활동하고 싶은 분야를 선택해주세요 (다중 선택 가능)</p>
                        <div class="model-categories">
                            <label class="category-option">
                                <input type="checkbox" name="modelCategory" value="commercial">
                                <div class="category-content">
                                    <div class="icon">🛒</div>
                                    <div class="title">상업 광고</div>
                                    <div class="description">제품, 서비스 홍보</div>
                                </div>
                            </label>
                            
                            <label class="category-option">
                                <input type="checkbox" name="modelCategory" value="fashion">
                                <div class="category-content">
                                    <div class="icon">👗</div>
                                    <div class="title">패션 모델</div>
                                    <div class="description">의류, 액세서리</div>
                                </div>
                            </label>
                            
                            <label class="category-option">
                                <input type="checkbox" name="modelCategory" value="beauty">
                                <div class="category-content">
                                    <div class="icon">💄</div>
                                    <div class="title">뷰티 모델</div>
                                    <div class="description">화장품, 스킨케어</div>
                                </div>
                            </label>
                            
                            <label class="category-option">
                                <input type="checkbox" name="modelCategory" value="lifestyle">
                                <div class="category-content">
                                    <div class="icon">🏡</div>
                                    <div class="title">라이프스타일</div>
                                    <div class="description">생활용품, 가전</div>
                                </div>
                            </label>
                            
                            <label class="category-option">
                                <input type="checkbox" name="modelCategory" value="food">
                                <div class="category-content">
                                    <div class="icon">🍕</div>
                                    <div class="title">푸드 모델</div>
                                    <div class="description">음식, 음료</div>
                                </div>
                            </label>
                            
                            <label class="category-option">
                                <input type="checkbox" name="modelCategory" value="tech">
                                <div class="category-content">
                                    <div class="icon">📱</div>
                                    <div class="title">테크 모델</div>
                                    <div class="description">IT, 전자제품</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Pricing Preview -->
                    <div class="form-section">
                        <h3>💰 수익 정보</h3>
                        <div class="pricing-preview">
                            <div class="pricing-item">
                                <span class="pricing-label">계약 조건:</span>
                                <span class="pricing-value" id="contractSummary">정액 100,000원/컷</span>
                            </div>
                            <div class="pricing-item">
                                <span class="pricing-label">예상 월 수익:</span>
                                <span class="pricing-value highlight">300,000원 - 1,000,000원</span>
                            </div>
                            <div class="pricing-note">
                                실제 수익은 사용 빈도와 계약 조건에 따라 달라질 수 있습니다
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevModelStep()">이전 단계</button>
                    <button class="btn btn-primary" id="step5Next" onclick="nextModelStep()" disabled>다음 단계</button>
                </div>
            </section>

            <!-- Step 6: Review & Approval -->
            <section class="step-content" id="modelStep6">
                <div class="step-header">
                    <div class="step-badge">단계 6/7</div>
                    <h1 class="step-title">검수 및 승인</h1>
                    <p class="step-description">제출하신 정보를 검토하고 승인 과정을 진행합니다</p>
                </div>

                <div class="review-area">
                    <div class="review-status-card">
                        <div class="status-header">
                            <div class="status-icon" id="reviewStatusIcon">⏳</div>
                            <h2 class="status-title" id="reviewStatusTitle">검수 진행 중</h2>
                            <p class="status-description" id="reviewStatusDescription">
                                제출하신 모든 정보를 검토하고 있습니다. 잠시만 기다려주세요.
                            </p>
                        </div>
                        
                        <div class="review-progress">
                            <div class="progress-steps">
                                <div class="progress-step completed">
                                    <div class="step-icon">✅</div>
                                    <span>정보 접수</span>
                                </div>
                                <div class="progress-step active" id="reviewStep2">
                                    <div class="step-icon">⏳</div>
                                    <span>서류 검토</span>
                                </div>
                                <div class="progress-step" id="reviewStep3">
                                    <div class="step-icon">⏳</div>
                                    <span>품질 검증</span>
                                </div>
                                <div class="progress-step" id="reviewStep4">
                                    <div class="step-icon">⏳</div>
                                    <span>최종 승인</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="review-details">
                        <h3>검수 항목</h3>
                        <div class="review-checklist">
                            <div class="checklist-item completed">
                                <div class="check-icon">✅</div>
                                <span>본인 인증 확인</span>
                            </div>
                            <div class="checklist-item completed">
                                <div class="check-icon">✅</div>
                                <span>계약 조건 확인</span>
                            </div>
                            <div class="checklist-item completed">
                                <div class="check-icon">✅</div>
                                <span>포트폴리오 품질 검증</span>
                            </div>
                            <div class="checklist-item active" id="checkProduct">
                                <div class="check-icon">⏳</div>
                                <span>제품 정보 검토</span>
                            </div>
                            <div class="checklist-item" id="checkFinal">
                                <div class="check-icon">⏳</div>
                                <span>최종 승인 처리</span>
                            </div>
                        </div>
                    </div>

                    <div class="estimated-time">
                        <h3>예상 소요 시간</h3>
                        <div class="time-info">
                            <div class="time-item">
                                <strong>일반 검수:</strong> 1-2 시간
                            </div>
                            <div class="time-item">
                                <strong>추가 검토 필요 시:</strong> 1-3일
                            </div>
                        </div>
                        <p class="time-note">
                            검수 완료 시 이메일로 결과를 알려드립니다
                        </p>
                    </div>
                </div>
                
                <!-- Admin Approval Button -->
                <div class="admin-approval-section">
                    <button class="btn btn-outline admin-approval-btn" onclick="adminApproveRegistration()">
                        ⚡ 관리자 권한으로 즉시 승인
                    </button>
                    <p class="admin-approval-note">테스트용 관리자 승인 기능입니다</p>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevModelStep()">이전 단계</button>
                    <button class="btn btn-primary" id="step6Next" onclick="startReviewProcess()" disabled>승인 대기</button>
                </div>
            </section>

            <!-- Step 7: Congratulations -->
            <section class="step-content" id="modelStep7">
                <div class="step-header">
                    <div class="step-badge">완료</div>
                    <h1 class="step-title">🎉 축하합니다! 모델 등록이 완료되었습니다!</h1>
                    <p class="step-description">이제 xBrush의 공식 AI 모델로 활동할 수 있습니다.</p>
                </div>

                <div class="completion-card">
                    <div class="card-header">
                        <div style="font-size: 5rem; margin-bottom: 20px;">🌟</div>
                        <h2 class="card-title">모든 등록 절차가 완료되었습니다!</h2>
                        <p class="card-subtitle">지금부터 AI 모델로서 수익 창출이 가능합니다.</p>
                    </div>
                    
                    <div class="completion-content">
                        <div class="model-activation-section">
                            <h3>🚀 모델 활동 시작하기</h3>
                            <p class="activation-description">
                                아래 버튼을 클릭하여 모델 리스트에 등록하고 바로 활동을 시작하세요!
                            </p>
                            <button class="btn btn-primary btn-large activate-model-btn" onclick="activateModel()">
                                <span class="btn-icon">⚡</span>
                                <span class="btn-text">모델 리스트에 등록하고 활동 시작하기</span>
                            </button>
                        </div>
                        
                        <div class="completion-benefits">
                            <h3>✨ 이제 가능한 것들</h3>
                            <div class="benefits-list">
                                <div class="benefit-item">
                                    <div class="benefit-icon">💰</div>
                                    <div class="benefit-content">
                                        <h4>즉시 수익 창출</h4>
                                        <p>AI 생성 콘텐츠를 통한 수익이 바로 시작됩니다</p>
                                    </div>
                                </div>
                                <div class="benefit-item">
                                    <div class="benefit-icon">📊</div>
                                    <div class="benefit-content">
                                        <h4>실시간 수익 확인</h4>
                                        <p>대시보드에서 수익과 활동 내역을 확인할 수 있습니다</p>
                                    </div>
                                </div>
                                <div class="benefit-item">
                                    <div class="benefit-icon">🌐</div>
                                    <div class="benefit-content">
                                        <h4>글로벌 활동</h4>
                                        <p>전 세계 고객들과 함께 일할 수 있습니다</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="model-info-display">
                            <h3>📋 등록된 모델 정보</h3>
                            <div class="model-details">
                                <div class="detail-item">
                                    <span class="detail-label">모델명:</span>
                                    <span class="detail-value" id="finalModelName">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">카테고리:</span>
                                    <span class="detail-value" id="finalCategories">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">등록 일시:</span>
                                    <span class="detail-value" id="registrationDate">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-section">
                    <div class="final-actions">
                        <button class="btn btn-outline btn-large" onclick="goToDashboard()">
                            <span class="btn-icon">📊</span>
                            대시보드로 이동
                        </button>
                        <button class="btn btn-outline btn-large" onclick="goBack()">
                            <span class="btn-icon">🏠</span>
                            메인으로 돌아가기
                        </button>
                    </div>
                </div>
            </section>
            
        </main>
    </div>

    <!-- Thumbnail Selection Modal -->
    <div class="thumbnail-modal" id="thumbnailModal" style="display: none;">
        <div class="thumbnail-modal-content">
            <div class="thumbnail-modal-header">
                <h3>포트폴리오에서 썸네일 선택</h3>
                <button class="btn btn-outline" onclick="closeThumbnailSelector()">×</button>
            </div>
            <div class="thumbnail-modal-body">
                <p class="section-description">등록하신 포트폴리오 이미지 중에서 대표 썸네일로 사용할 이미지를 선택해주세요.</p>
                <div class="portfolio-thumbnail-grid" id="portfolioThumbnailGrid">
                    <!-- Portfolio images will be loaded here -->
                </div>
            </div>
            <div class="thumbnail-modal-footer">
                <button class="btn btn-outline" onclick="closeThumbnailSelector()">취소</button>
                <button class="btn btn-primary" onclick="confirmThumbnailSelection()" disabled id="confirmThumbnailBtn">선택 완료</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>&copy; 2024 xBrush. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">이용약관</a>
                <a href="#">개인정보처리방침</a>
                <a href="#">문의하기</a>
                <a href="admin.html" style="opacity: 0.5;">관리자</a>
                <a href="model-dashboard.html" style="opacity: 0.5;">모델 대시보드</a>
            </div>
        </div>
    </footer>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <!-- JavaScript Files -->
    <script src="js/app-config.js"></script>
    <script src="constants.js"></script>
    <script src="utils.js"></script>
    <script src="js/image-utils.js"></script>
    <script src="js/image-cache.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/firebase-model-storage.js"></script>
    <script src="js/model-storage.js"></script>
    <script src="js/model-storage-adapter.js"></script>
    <script src="model-register.js?v=20250710-firebase"></script>
    
    <!-- Initialize Firebase and wait for it -->
    <script>
        // Wait for Firebase to be fully initialized
        window.addEventListener('load', async function() {
            console.log('Page loaded, checking Firebase status...');
            console.log('window.firebase:', !!window.firebase);
            console.log('window.AppConfig:', !!window.AppConfig);
            console.log('window.firebaseDB:', !!window.firebaseDB);
            console.log('window.firebaseModelStorage:', !!window.firebaseModelStorage);
            
            let retries = 20; // Increase retries
            while (retries > 0) {
                if (window.firebase && window.firebaseDB && window.firebaseModelStorage) {
                    console.log('Firebase services ready!');
                    break;
                }
                console.log(`Waiting for Firebase initialization... (${retries} retries left)`);
                console.log('Current status - firebase:', !!window.firebase, 'firebaseDB:', !!window.firebaseDB, 'firebaseModelStorage:', !!window.firebaseModelStorage);
                await new Promise(resolve => setTimeout(resolve, 500));
                retries--;
            }
            
            if (!window.firebaseDB) {
                console.error('Firebase failed to initialize properly');
                console.error('Final status - firebase:', !!window.firebase, 'AppConfig:', !!window.AppConfig, 'firebaseDB:', !!window.firebaseDB);
                alert('Firebase 초기화에 실패했습니다. 페이지를 새로고침해주세요.');
            }
        });
        
        // Also listen for Firebase ready event
        window.addEventListener('firebaseReady', function() {
            console.log('Firebase ready event received!');
        });
        
        // Secret admin access: Press Ctrl+Shift+A
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                window.location.href = 'admin.html';
            }
        });
    </script>
    
    <!-- Mobile Menu Handler -->
    <script src="js/mobile-menu.js"></script>
</body>
</html>